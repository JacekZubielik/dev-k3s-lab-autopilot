apiVersion: traefik.io/v1alpha1
kind: IngressRoute
metadata:
    annotations:
        argocd.argoproj.io/sync-wave: "3"
        cert-manager.io/cluster-issuer: letsencrypt-staging
        cert-manager.io/common-name: ENC[AES256_GCM,data:T0Qv5o85TKvCinb2ZdLT89fzK3uU,iv:W5J3kck/7sesZeGYJxWwptWRzX7Y7kEWFdDsEW2oRfg=,tag:89+9YPNqxIPpShQRu+9r1Q==,type:str]
        external-dns.alpha.kubernetes.io/hostname: ENC[AES256_GCM,data:sr+NZMWOc0k3xEFlxvsAhLhtT/UOVKY4ruia1pM=,iv:83uzr0Icnog0mVePtEavbSqoaC0sB3ArvM0+XoQ9IMQ=,tag:N7rJPYNkv9ovWvx6aYF7Fg==,type:str]
        external-dns.alpha.kubernetes.io/target: ENC[AES256_GCM,data:PiLafFYEPOqQXd9+JgLm/7vCwf8y,iv:qYwt3OgaFK8GfzEAcAaHD0/Rl+0vPK7iaSo0kHD7iAw=,tag:+pKwKhy6QnX8SrlQpdodYQ==,type:str]
        external-dns.alpha.kubernetes.io/ttl: "300"
        kubernetes.io/ingress.class: traefik-external
    name: minio-console-staging
    namespace: traefik
spec:
    entryPoints:
        - websecure
    routes:
        - kind: Rule
          match: ENC[AES256_GCM,data:KVQCbk4n3d2Gg8gHMXrlRL2q19nuHgj87RnIecaUeKCRjOssadEoiPzmhmjs/OGjQfZFl3LvnNqwDQ==,iv:U2NvJE78Mff3CgD8rlYuXa1mKSsTchH27WuH0SCiKVs=,tag:kpbGIAa76S8MsW4HMzBmuw==,type:str]
          middlewares:
            - name: chain-traefik-dashboard
              namespace: traefik
          services:
            - name: minio-console
              port: 9001
              scheme: http
              passHostHeader: true
    tls:
        domains:
            - main: ENC[AES256_GCM,data:sgWqIkw61gOgVflfbNb2Ags8HiqN,iv:mDU+quML/o3QPPmL95yLovKZC/b+ETPvTyCAYxZldDU=,tag:KmwSGL/jhkpiGi+F2RKS6w==,type:str]
              sans:
                - ENC[AES256_GCM,data:QuoLf7XpocfGdmK4miwQ5SRy5QiiUw==,iv:7EXr+TIhITTpmiCb7hVnz2bSDYcloP8yO4QlDSHCsOM=,tag:LjJj+rNOl+Dw+LBHPTjbCw==,type:str]
        options:
            name: tls-ver13
            namespace: traefik
        secretName: minio-console-s3-cf-staging
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1deg9tqt7jtddnqme6nvcl72czns80z0n25u8k9pw5830dn4arsks5pua4h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBqUUp3SWxreStnRHRqRk1E
            bUFRNUVrZVh6RmhFaERUL2x3VHZTY3RyZkUwCks0YmVuRUM1cjlMU3piNHhlZk5r
            akZUS1JrQWVOTTVNYnBSOGVCTmlRT3MKLS0tIG43S1p6dDVHbDViYWpIdDBjbWpL
            dUNEY1RSS0VhQy85bktNSVNreGhpbzQKyG/CSkMTKeZ3XZe4FHSquXjmV47Ajy/Q
            IxjL0/rEudl2I/SqqDKKkQ26VMATaEQhwAtTrk0ytwWyYBo3ipORqg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-10-02T22:33:53Z"
    mac: ENC[AES256_GCM,data:HJaZYs3YOG20TH1RteQk24bZjEdYjaFIqz9kWTUoSnl6xqLPvhJKRjA1gbU98ijIpwBxaDn29ItWvwMPn0p8by9g0V17BjLgK434/mrrzK8Gk4f4MQ4Tua/mVOAZuhjx91w1OCENxvMaR1LlZ+3eJYth7eM+//9IvFPoiOJhQUo=,iv:tWRtOsJ/gDXaAHv991jXy+n1XBa8b+kUdTkwaWzIA9E=,tag:UyXFjifrizxZr6+gxJoAHg==,type:str]
    pgp:
        - created_at: "2024-10-02T22:15:28Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hQIMA0R6oz1GmNjVAQ//SzZPJ7QgHxcx9LzERC7XWcsqdpH0zC1xgHuL4KXyB76a
            3FcWllDZtNiUaZgJe9Iy5of8CG8ZeK/m03gbzA6MOzf0NipSzJjxGjTrkJVT0nz5
            XA2Yk5635SQ6asLUjWRPRSmKj4nrTqlMatWfPt/DCi8gpJHqGsOSr+HrJpvjPkkF
            AHkyaLjac39YpDjqZsUugHJof0UjIV+VVvHwxeX+WPBLlC6qRX89ZaC0tN/ZxcC9
            zzbhru00mJAPSgJf0yNtptkTds3HAHdoA/s8vjwktUUgr1IR8oI/f0+aLROZYbAE
            mjpx/vc15ZS0lHXltpKbjwAEC5+K526a156JUKOBivUtE/L3M9hpIWQi3YmH9pEI
            vHnLs0e7QOe7QXMi4EGUvON3y9rDOPkxawAqXD7JhSMd8wshe2v3kzV6M5Tt1KW9
            y/6zKziWrwrXJVQf9ZeoKQxv1Kq0adLEjyFp9PAzpqGToqrCNGh5VZ8vPoQ/On44
            B0MR41NT/MmroIoryVgUMEdqwI6lZILyebOc3BBK4sllLM7IfvuYGzSkZ0f7YAhv
            kxm4g6Byef1FacQozZ8Y3QIGks3sqL7zKNMRSQT/y+9ENuiyJkwlBm/mLfFyv5vm
            XdqjiHgx/gTRjSeyvkIHPK17KcOSmEVOL+LFXYNAc6fIlEdK0U2Gx9HicR411IfS
            XgFdQNK9K3asotssXORFHlzbvsvLWXnemR/RT4mmtHvcCREt/md885KCEc5v5VhT
            lBHSLmeigL2K1MvLd+S0dIuzm8Nh8YtaAd2LZ+TDTbZ7Jc41QfWBxM3tJR59/1c=
            =DLVo
            -----END PGP MESSAGE-----
          fp: 6D3FE55384B558E06A1BA364586EFA784A32C981
    encrypted_regex: ^(data|stringData|dnsNames|email|accessKeyID|region|hostedZoneID|role|dnsZones|cert-manager.io/common-name|commonName|external-dns.alpha.kubernetes.io/hostname|external-dns.alpha.kubernetes.io/target|match|main|sans)$
    version: 3.9.0
---
apiVersion: traefik.io/v1alpha1
kind: IngressRoute
metadata:
    annotations:
        argocd.argoproj.io/sync-wave: "3"
        cert-manager.io/cluster-issuer: letsencrypt-staging
        cert-manager.io/common-name: ENC[AES256_GCM,data:T0Qv5o85TKvCinb2ZdLT89fzK3uU,iv:W5J3kck/7sesZeGYJxWwptWRzX7Y7kEWFdDsEW2oRfg=,tag:89+9YPNqxIPpShQRu+9r1Q==,type:str]
        external-dns.alpha.kubernetes.io/hostname: ENC[AES256_GCM,data:9k0L2yq+6lglEVvciaSdLMiZS3Ao,iv:OfcXdJ0v8yV4OC6VWb8viebdEcPxEfsdgKSSzJV2Kjo=,tag:s1MD4dmTQM/3hjbg1IpgCQ==,type:str]
        external-dns.alpha.kubernetes.io/target: ENC[AES256_GCM,data:hrnZXO08udXBzSLV/nO5vpUJ,iv:VUB5vRJvwXK19n64+KHh9Q3yP5Ic5rD1rdaTQXgbnRk=,tag:QffYqi5e7wIYzexCawLQNg==,type:str]
        external-dns.alpha.kubernetes.io/ttl: "300"
        kubernetes.io/ingress.class: traefik-external
    name: s3-staging
    namespace: traefik
spec:
    entryPoints:
        - websecure
    routes:
        - kind: Rule
          match: ENC[AES256_GCM,data:fXdver8BAvwEhFSDy6k/Tdld0yhdN4ULyhWGpWo=,iv:qSbCThpICLsUWfKb78rda2+9zcdL+4Li9rjRN+e38is=,tag:uKC0Dwq/8lyT09KvfSoytg==,type:str]
          services:
            - name: minio-api
              port: 9002
              scheme: http
              #   passHostHeader: true
    tls:
        domains:
            - main: ENC[AES256_GCM,data:ayibFxhzBSfqP5K2DzL2bSEa,iv:zIHfwi1AYPMEXhN/0F/wVFbe8kXVTEaBvvtRMX7wrAM=,tag:SSwz+Qlm8uvtuofN94TCjw==,type:str]
              sans:
                - ENC[AES256_GCM,data:rHadthBUQSDaX8CYA2/etVd0QQ==,iv:jl1C0z058cPCh33ivZO27tR4HzvA4zRypNsuD3Bl7BE=,tag:qQ7cje2ivA1rKmRvuKpvaA==,type:str]
        options:
            name: tls-ver13
            namespace: traefik
        secretName: minio-api-cf-staging
# apiVersion: traefik.io/v1alpha1
# kind: IngressRoute
# metadata:
#     annotations:
#         argocd.argoproj.io/sync-wave: "3"
#         cert-manager.io/cluster-issuer: letsencrypt-staging
#         cert-manager.io/common-name: s3.storage.anotherlife.org.pl
#         external-dns.alpha.kubernetes.io/hostname: s3.storage.anotherlife.org.pl
#         external-dns.alpha.kubernetes.io/target: storage.anotherlife.org.pl
#         external-dns.alpha.kubernetes.io/ttl: "300"
#         kubernetes.io/ingress.class: traefik-external
#     name: s3-staging
#     namespace: traefik
# spec:
#     entryPoints:
#         - websecure
#     routes:
#         - kind: Rule
#           match: Host(`s3.storage.anotherlife.org.pl`)
#           services:
#             - name: minio-proxy
#               port: 9000
#               scheme: https
#               #   passHostHeader: true
#         - kind: Rule
#           match: Host(`console.s3.storage.anotherlife.org.pl`) && (PathPrefix(`/`))
#           middlewares:
#             - name: chain-traefik-dashboard
#               namespace: traefik
#           services:
#             - name: minio-proxy
#               port: 9001
#               scheme: https
#               passHostHeader: true
#     tls:
#         domains:
#             - main: storage.anotherlife.org.pl
#               sans:
#                 - .storage.anotherlife.org.pl
#         options:
#             name: tls-ver13
#             namespace: traefik
#         secretName: s3-cf-staging
# ---
# apiVersion: traefik.io/v1alpha1
# kind: TraefikService
# metadata:
#     annotations:
#         argocd.argoproj.io/sync-wave: "2"
#     name: s3
# spec:
#     weighted:
#         services:
#             - name: minio
#               port: 9000
#               weight: 1
# ---
# apiVersion: traefik.io/v1alpha1
# kind: TraefikService
# metadata:
#     annotations:
#         argocd.argoproj.io/sync-wave: "2"
#     name: minio-console
# spec:
#     weighted:
#         services:
#             - name: minio-console
#               port: 9001
#               weight: 1
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1deg9tqt7jtddnqme6nvcl72czns80z0n25u8k9pw5830dn4arsks5pua4h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBqUUp3SWxreStnRHRqRk1E
            bUFRNUVrZVh6RmhFaERUL2x3VHZTY3RyZkUwCks0YmVuRUM1cjlMU3piNHhlZk5r
            akZUS1JrQWVOTTVNYnBSOGVCTmlRT3MKLS0tIG43S1p6dDVHbDViYWpIdDBjbWpL
            dUNEY1RSS0VhQy85bktNSVNreGhpbzQKyG/CSkMTKeZ3XZe4FHSquXjmV47Ajy/Q
            IxjL0/rEudl2I/SqqDKKkQ26VMATaEQhwAtTrk0ytwWyYBo3ipORqg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-10-02T22:33:53Z"
    mac: ENC[AES256_GCM,data:HJaZYs3YOG20TH1RteQk24bZjEdYjaFIqz9kWTUoSnl6xqLPvhJKRjA1gbU98ijIpwBxaDn29ItWvwMPn0p8by9g0V17BjLgK434/mrrzK8Gk4f4MQ4Tua/mVOAZuhjx91w1OCENxvMaR1LlZ+3eJYth7eM+//9IvFPoiOJhQUo=,iv:tWRtOsJ/gDXaAHv991jXy+n1XBa8b+kUdTkwaWzIA9E=,tag:UyXFjifrizxZr6+gxJoAHg==,type:str]
    pgp:
        - created_at: "2024-10-02T22:15:28Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hQIMA0R6oz1GmNjVAQ//SzZPJ7QgHxcx9LzERC7XWcsqdpH0zC1xgHuL4KXyB76a
            3FcWllDZtNiUaZgJe9Iy5of8CG8ZeK/m03gbzA6MOzf0NipSzJjxGjTrkJVT0nz5
            XA2Yk5635SQ6asLUjWRPRSmKj4nrTqlMatWfPt/DCi8gpJHqGsOSr+HrJpvjPkkF
            AHkyaLjac39YpDjqZsUugHJof0UjIV+VVvHwxeX+WPBLlC6qRX89ZaC0tN/ZxcC9
            zzbhru00mJAPSgJf0yNtptkTds3HAHdoA/s8vjwktUUgr1IR8oI/f0+aLROZYbAE
            mjpx/vc15ZS0lHXltpKbjwAEC5+K526a156JUKOBivUtE/L3M9hpIWQi3YmH9pEI
            vHnLs0e7QOe7QXMi4EGUvON3y9rDOPkxawAqXD7JhSMd8wshe2v3kzV6M5Tt1KW9
            y/6zKziWrwrXJVQf9ZeoKQxv1Kq0adLEjyFp9PAzpqGToqrCNGh5VZ8vPoQ/On44
            B0MR41NT/MmroIoryVgUMEdqwI6lZILyebOc3BBK4sllLM7IfvuYGzSkZ0f7YAhv
            kxm4g6Byef1FacQozZ8Y3QIGks3sqL7zKNMRSQT/y+9ENuiyJkwlBm/mLfFyv5vm
            XdqjiHgx/gTRjSeyvkIHPK17KcOSmEVOL+LFXYNAc6fIlEdK0U2Gx9HicR411IfS
            XgFdQNK9K3asotssXORFHlzbvsvLWXnemR/RT4mmtHvcCREt/md885KCEc5v5VhT
            lBHSLmeigL2K1MvLd+S0dIuzm8Nh8YtaAd2LZ+TDTbZ7Jc41QfWBxM3tJR59/1c=
            =DLVo
            -----END PGP MESSAGE-----
          fp: 6D3FE55384B558E06A1BA364586EFA784A32C981
    encrypted_regex: ^(data|stringData|dnsNames|email|accessKeyID|region|hostedZoneID|role|dnsZones|cert-manager.io/common-name|commonName|external-dns.alpha.kubernetes.io/hostname|external-dns.alpha.kubernetes.io/target|match|main|sans)$
    version: 3.9.0
