# apiVersion: traefik.io/v1alpha1
# kind: IngressRoute
# metadata:
#     annotations:
#         argocd.argoproj.io/sync-wave: "3"
#         cert-manager.io/cluster-issuer: letsencrypt-staging
#         cert-manager.io/common-name: s3.storage.anotherlife.org.pl
#         external-dns.alpha.kubernetes.io/hostname: console.s3.storage.anotherlife.org.pl
#         external-dns.alpha.kubernetes.io/target: s3.storage.anotherlife.org.pl
#         external-dns.alpha.kubernetes.io/ttl: "300"
#         kubernetes.io/ingress.class: traefik-external
#     name: minio-console-staging
#     namespace: traefik
# spec:
#     entryPoints:
#         - websecure
#     routes:
#         - kind: Rule
#           match: Host(`console.s3.storage.anotherlife.org.pl`) && (PathPrefix(`/`))
#           middlewares:
#             - name: chain-traefik-dashboard
#               namespace: traefik
#           services:
#             - name: minio-console
#               port: 9001
#               scheme: https
#               passHostHeader: true
#     tls:
#         domains:
#             - main: s3.storage.anotherlife.org.pl
#               sans:
#                 - .s3.storage.anotherlife.org.pl
#         options:
#             name: tls-ver13
#             namespace: traefik
#         secretName: minio-console-cf-staging
apiVersion: traefik.io/v1alpha1
kind: IngressRoute
metadata:
    annotations:
        argocd.argoproj.io/sync-wave: "3"
        cert-manager.io/cluster-issuer: letsencrypt-staging
        cert-manager.io/common-name: s3.storage.anotherlife.org.pl
        external-dns.alpha.kubernetes.io/hostname: s3.storage.anotherlife.org.pl
        external-dns.alpha.kubernetes.io/target: storage.anotherlife.org.pl
        external-dns.alpha.kubernetes.io/ttl: "300"
        kubernetes.io/ingress.class: traefik-external
    name: s3-staging
    namespace: traefik
spec:
    entryPoints:
        - websecure
    routes:
        - kind: Rule
          match: Host(`s3.storage.anotherlife.org.pl`)
          services:
            - name: minio-proxy
              port: 9000
              scheme: https
              #   passHostHeader: true
        - kind: Rule
          match: Host(`console.s3.storage.anotherlife.org.pl`) && (PathPrefix(`/`))
          middlewares:
            - name: chain-traefik-dashboard
              namespace: traefik
          services:
            - name: minio-proxy
              port: 9001
              scheme: https
              passHostHeader: true
    tls:
        domains:
            - main: storage.anotherlife.org.pl
              sans:
                - .storage.anotherlife.org.pl
        options:
            name: tls-ver13
            namespace: traefik
        secretName: minio-console-cf-staging
# apiVersion: traefik.io/v1alpha1
# kind: IngressRoute
# metadata:
#     annotations:
#         argocd.argoproj.io/sync-wave: "3"
#         cert-manager.io/cluster-issuer: letsencrypt-staging
#         cert-manager.io/common-name: s3.storage.anotherlife.org.pl
#         external-dns.alpha.kubernetes.io/hostname: s3.storage.anotherlife.org.pl
#         external-dns.alpha.kubernetes.io/target: storage.anotherlife.org.pl
#         external-dns.alpha.kubernetes.io/ttl: "300"
#         kubernetes.io/ingress.class: traefik-external
#     name: s3-staging
#     namespace: traefik
# spec:
#     entryPoints:
#         - websecure
#     routes:
#         - kind: Rule
#           match: Host(`s3.storage.anotherlife.org.pl`)
#           services:
#             - name: minio-proxy
#               port: 9000
#               scheme: https
#               #   passHostHeader: true
#         - kind: Rule
#           match: Host(`console.s3.storage.anotherlife.org.pl`) && (PathPrefix(`/`))
#           middlewares:
#             - name: chain-traefik-dashboard
#               namespace: traefik
#           services:
#             - name: minio-proxy
#               port: 9001
#               scheme: https
#               passHostHeader: true
#     tls:
#         domains:
#             - main: storage.anotherlife.org.pl
#               sans:
#                 - .storage.anotherlife.org.pl
#         options:
#             name: tls-ver13
#             namespace: traefik
#         secretName: s3-cf-staging
# ---
# apiVersion: traefik.io/v1alpha1
# kind: TraefikService
# metadata:
#     annotations:
#         argocd.argoproj.io/sync-wave: "2"
#     name: s3
# spec:
#     weighted:
#         services:
#             - name: minio
#               port: 9000
#               weight: 1
# ---
# apiVersion: traefik.io/v1alpha1
# kind: TraefikService
# metadata:
#     annotations:
#         argocd.argoproj.io/sync-wave: "2"
#     name: minio-console
# spec:
#     weighted:
#         services:
#             - name: minio-console
#               port: 9001
#               weight: 1
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age: []
    lastmodified: "2024-10-01T22:01:42Z"
    mac: ENC[AES256_GCM,data:AJ18Phn2gBtDOhjW+cwSSATgS2Uf/e03haXB93PWSe7jd5AayEP8Z5QpqTpC4VZ29kr1TqUFQcHGN8Lg3Bc8ZERkYfU1027JRdcjyHE/LzMEeocb+/Ng8Hn07AMqN60uyZQALQOheYDuhg1YmnBecNnD73yXViK9FkZEI8sikqk=,iv:x5aoq1IBo+QYVKPlhk6LUKZAibuzjmD/hR3DARoi+og=,tag:2G2qYA3Z9Nx/bXWdmlmaGw==,type:str]
    pgp:
        - created_at: "2024-10-01T22:01:42Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hQIMA0R6oz1GmNjVAQ/+OcPntcAmkb/RiG9FztzDo7yEcSlGKyusa2yuIYyyhL06
            uLJ6QqgZ3ZWHnZrWSM793UPuneCG2JcSz9CHFPi/tejNvvDQsxA71jHKUBwEwfCr
            IHamaehUZJ0rt7H5QLuYXf+wFPoZ9uL4b1279XGzCNToRpnO3QzIBAKlFiJ/5NyO
            Y6Q8Pu3rbyFfdPRlh/HkFsl2VwlwNK53E9x6bdW+9jD+x/rxInipHC54rAF1UVnJ
            phXGr65FFtTeYJha6fzdQrkGxQG6jrZYK6o6aF7cYl9GVHFKC9Nk6R8QgCsjFjFs
            Agj11KChu2lrROIoFLtdzB9coTBerDY/sfsP5vgqHYxvFvDhi2s/C9mXlAlHRyMA
            z+s5KnAukjUJ7wC3vVk3KYNWz2rL+HKel9e0OzfijP//bJ6iBne3Gsk7nSJrEi2F
            g35/q7j8pDqS4FDl39/MGjJkuqA8tmcbJPYtjRpIBFRBB053crz2ZRTGMlsN64Ka
            JqDjY6K+glYDCtzJN2IvaiSvVhkPwGcpc1hlzqL2HBPs5nascuDiS5AsHOOlN1GN
            gZlMQptzKB12x0PFZVigjy3UXo86WRVw6j0JiWs6GIxtex4ZKBcsjmlQe5b2wTUx
            kTKxTEYWtPQIYG2elEjw+ytOgdT8ZtJIFTb2L1xxPp6qTU3LFMHhpWwnrBnwBbnS
            XgFBi6JzI+hiCZg4cKdt/WQA/7PFkc+GHAnX/EJnsjGiZ2ZB6okvbEA0/EZnPVYO
            fro+l4m5cG4yA/yqgD8p0FippwHNW73zIL+XzhfsBeGPTju94XJ51fouty7nZ0g=
            =j2f0
            -----END PGP MESSAGE-----
          fp: 6D3FE55384B558E06A1BA364586EFA784A32C981
    encrypted_regex: ^(data|stringData|dnsNames|email|accessKeyID|region|hostedZoneID|role|dnsZones)$
    version: 3.9.0
