---
apiVersion: velero.io/v1
kind: Backup
metadata:
  name: test-backup-longhorn-backup-vsc
  namespace: velero
  annotations:
    argocd.argoproj.io/hook: PostSync
    # argocd.argoproj.io/sync-wave: "2"
    velero.io/csi-volumesnapshot-class_driver.longhorn.io: "longhorn-backup-vsc"
    scheduled: "yes"
  labels:
    scheduled: "yes"
    velero.io/schedule-name: "schedule-5-min-full-backup"
spec:
  defaultVolumesToFsBackup: true
  includedNamespaces:
  - uptime-kuma
  ttl: 1h0m0s
  storageLocation: s3-minio
  orderedResources:
    persistentvolumes: pvc-uptime-kuma
  # snapshotVolumes: pvc-uptime-kuma
  # volumeSnapshotLocations:
  # - s3-minio
  snapshotMoveData: true
  datamover: velero
  uploaderConfig:
      parallelFilesUpload: 10
